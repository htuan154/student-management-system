<div class="card">
  <div class="card-header">
    <h2>{{ isEditMode ? 'Cập nhật phân công' : 'Tạo phân công mới' }}</h2>
    <a routerLink="/admin/assignments" class="btn">Quay lại</a>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="grid">
      <div class="col">
        <label>Giảng viên <span class="req">*</span></label>
        <select formControlName="teacherId">
          <option value="">-- Chọn giảng viên --</option>
          <option *ngFor="let t of teachers" [value]="t.teacherId">
            {{ t.fullName || t.teacherId }}
          </option>
        </select>
      </div>

      <div class="col">
        <label>Môn học <span class="req">*</span></label>
        <select formControlName="courseId">
          <option value="">-- Chọn môn học --</option>
          <option *ngFor="let c of courses" [value]="c.courseId">
            {{ c.courseId }} - {{ c.courseName }}
          </option>
        </select>
      </div>

      <div class="col">
        <label>Học kỳ <span class="req">*</span></label>
        <select formControlName="semesterId">
          <option [ngValue]="null">-- Chọn học kỳ --</option>
          <option *ngFor="let s of semesters" [ngValue]="s.semesterId">
            {{ s.semesterName }} ({{ s.academicYear }})
          </option>
        </select>
      </div>

      <div class="col">
        <label class="checkbox-label">
          <input type="checkbox" formControlName="isActive" />
          <span>Đang hoạt động</span>
        </label>
      </div>
    </div>

    <div class="actions">
      <a class="btn" routerLink="/admin/assignments">Hủy</a>
      <button class="btn primary" type="submit" [disabled]="form.invalid || isLoading">
        {{ isLoading ? 'Đang lưu...' : (isEditMode ? 'Cập nhật' : 'Tạo mới') }}
      </button>
    </div>

    <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>
  </form>
</div>
